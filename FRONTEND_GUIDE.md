# 🎨 OpenSODA 前端使用指南

## 📋 新增功能概览

我们为 OpenSODA 项目新增了 **3个智能预测页面**，全部基于机器学习模型，提供数据驱动的洞察：

### 1️⃣ Fork 预测页面 (`/home/fork-prediction`)
- **功能**：预测项目的 Fork 数量
- **模型**：随机森林回归模型
- **特色**：
  - 📊 预测值 vs 真实值散点图
  - 🎯 特征重要性排名（Top 10）
  - 📉 预测误差分布
  - 📋 详细预测结果表格

### 2️⃣ 指标统计页面 (`/home/indicator-statistics`)
- **功能**：6大核心指标深度统计分析
- **指标**：
  - 非活跃贡献者
  - 活跃工单/PR
  - 已关闭工单
  - 新增工单
  - 新贡献者
  - 参与者总数
- **特色**：
  - 🔥 指标相关性热力图
  - 📊 指标统计分布（平均值、中位数、标准差）
  - 🏆 Top 10 项目指标对比（堆叠柱状图）
  - 📋 详细统计表格

### 3️⃣ 响应时间预测页面 (`/home/response-time-prediction`)
- **功能**：预测 Change Request 响应时间
- **模型**：XGBoost 回归模型
- **特色**：
  - ⏱️ **异步任务执行**（后台运行，不阻塞界面）
  - 📈 实时进度追踪（7步进度条）
  - 📊 历史趋势 + 未来6个月预测
  - 🏆 模型性能对比
  - 📊 交叉验证结果（仪表盘）
  - 🔮 未来预测详情表格
  - ⚙️ 最优模型参数展示

---

## 🚀 快速开始

### 1. 启动后端服务

```bash
cd C:\Users\22390\Desktop\OpenSODA
python backend/main.py
```

后端服务将在 `http://localhost:8000` 启动

### 2. 启动前端服务

```bash
npm run dev
```

前端服务将在 `http://localhost:5173` 启动（或其他端口）

### 3. 访问新页面

打开浏览器，访问：
- Fork 预测：`http://localhost:5173/home/fork-prediction`
- 指标统计：`http://localhost:5173/home/indicator-statistics`
- 响应时间预测：`http://localhost:5173/home/response-time-prediction`

或者通过左侧菜单导航：
- 🔱 Fork 预测
- 📊 指标统计
- ⏱️ 响应时间预测

---

## 📊 页面功能详解

### 🔱 Fork 预测页面

**使用流程：**
1. 页面自动加载预测数据
2. 查看模型评估指标（R²、RMSE、MAE）
3. 分析特征重要性排名
4. 查看预测散点图（对角线为完美预测）
5. 查看误差分布（绿色=低误差，黄色=中等，红色=高误差）
6. 浏览详细预测结果表格

**关键指标：**
- **R² 分数**：越接近 1 越好（0.92+ 为优秀）
- **RMSE**：均方根误差，越小越好
- **MAE**：平均绝对误差，越小越好

---

### 📊 指标统计页面

**使用流程：**
1. 页面自动加载统计数据
2. 查看元数据（总项目数、有效项目数、缺失率）
3. 分析相关性热力图（颜色越深相关性越强）
4. 查看指标分布图（平均值、中位数、标准差）
5. 对比 Top 10 项目的指标表现
6. 浏览详细统计表格

**热力图解读：**
- **红色**：正相关（值越大，相关性越强）
- **蓝色**：负相关（值越小，相关性越弱）
- **白色**：无相关性

---

### ⏱️ 响应时间预测页面

**使用流程：**
1. 点击 **"开始预测"** 按钮
2. 等待后台任务执行（约 1-3 分钟）
3. 实时查看进度条和步骤信息：
   - 【1/7】加载数据... (14%)
   - 【2/7】解析时序数据... (28%)
   - 【3/7】构建预测数据集... (42%)
   - 【4/7】数据清洗与预处理... (56%)
   - 【5/7】XGBoost模型训练... (70%)
   - 【6/7】模型评估与未来预测... (84%)
   - 【7/7】生成结果... (100%)
4. 预测完成后自动展示结果
5. 查看历史趋势和未来预测曲线
6. 分析模型性能和交叉验证结果
7. 查看未来6个月预测详情

**注意事项：**
- ⚠️ 预测过程中请勿关闭页面
- ⚠️ 同一时间只能运行一个预测任务
- ✅ 预测完成后可以重新开始新的预测

---

## 🎨 设计风格

所有新页面采用统一的**深黑科技风**设计：

- **背景色**：纯黑 `#000000`
- **主色调**：青蓝渐变 `#00d4ff` → `#0066ff`
- **卡片背景**：深灰渐变 `#1a1a1a` → `#0a0a0a`
- **边框**：深灰 `#333333`
- **文字**：白色 `#ffffff` / 灰色 `#999999`
- **强调色**：
  - 成功：`#00ff88`
  - 警告：`#ffaa00`
  - 错误：`#ff4444`

---

## 🔧 技术栈

### 前端
- **Vue 3** - Composition API
- **TypeScript** - 类型安全
- **ECharts** - 数据可视化
- **Axios** - HTTP 请求
- **Vue Router** - 路由管理

### 后端
- **FastAPI** - Python Web 框架
- **XGBoost** - 梯度提升模型
- **Scikit-learn** - 随机森林模型
- **Pandas** - 数据处理
- **NumPy** - 数值计算

---

## 📝 常见问题

### Q1: 页面加载失败怎么办？
**A:** 检查后端服务是否启动：
```bash
# 检查后端是否运行
curl http://localhost:8000/health
```

### Q2: 响应时间预测卡在某个进度不动？
**A:** 可能是模型训练时间较长，请耐心等待。如果超过 5 分钟仍无响应，刷新页面重试。

### Q3: 图表显示不正常？
**A:** 检查浏览器控制台是否有错误，确保 ECharts 正确加载。

### Q4: 如何修改预测参数？
**A:** 预测参数在后端代码中配置，修改 `backend/` 目录下对应的 Python 文件。

---

## 🎯 下一步计划

- [ ] 添加模型对比功能（多个模型同时预测）
- [ ] 支持自定义时间范围预测
- [ ] 添加数据导出功能（CSV/Excel）
- [ ] 实现预测结果缓存（避免重复计算）
- [ ] 添加更多可视化图表类型

---

## 📞 联系方式

如有问题或建议，请联系开发团队。

**祝你使用愉快！** 🎉

